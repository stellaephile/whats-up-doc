{"ast":null,"code":"// Symptom Assessment System\n// Phase 1: Rule-based logic (current)\n// Phase 2: Can be swapped with Amazon Bedrock/GenAI with zero frontend changes\n\n// Emergency keywords that trigger automatic emergency routing\nexport const emergencyKeywords = [\n// Cardiac emergencies\n'chest pain', 'heart attack', 'cardiac arrest', 'heart pain',\n// Breathing emergencies\n'breathlessness', 'can\\'t breathe', 'cannot breathe', 'difficulty breathing', 'shortness of breath', 'gasping', 'choking', 'suffocating',\n// Bleeding emergencies\n'severe bleeding', 'heavy bleeding', 'bleeding heavily', 'blood loss', 'hemorrhage', 'bleeding profusely',\n// Neurological emergencies\n'stroke', 'paralysis', 'face drooping', 'arm weakness', 'speech difficulty', 'loss of consciousness', 'unconscious', 'passed out', 'fainted', 'collapsed', 'seizure', 'convulsion', 'fitting',\n// Trauma emergencies\n'severe injury', 'major accident', 'head injury', 'severe trauma', 'broken bone', 'fracture', 'severe burn',\n// Other critical conditions\n'poisoning', 'overdose', 'suicide attempt', 'severe allergic reaction', 'anaphylaxis', 'severe pain', 'unbearable pain'];\n\n// Predefined symptom options with severity weights\nexport const symptomOptions = [\n// Mild symptoms (1-3)\n{\n  id: 'cold',\n  label: 'Common Cold',\n  category: 'Respiratory',\n  severity: 2\n}, {\n  id: 'cough',\n  label: 'Mild Cough',\n  category: 'Respiratory',\n  severity: 2\n}, {\n  id: 'headache',\n  label: 'Headache',\n  category: 'General',\n  severity: 2\n}, {\n  id: 'fatigue',\n  label: 'Fatigue',\n  category: 'General',\n  severity: 2\n}, {\n  id: 'sore_throat',\n  label: 'Sore Throat',\n  category: 'Respiratory',\n  severity: 2\n}, {\n  id: 'skin_rash',\n  label: 'Skin Rash (mild)',\n  category: 'Dermatology',\n  severity: 3\n}, {\n  id: 'minor_cut',\n  label: 'Minor Cut/Wound',\n  category: 'General',\n  severity: 2\n},\n// Moderate symptoms (4-6)\n{\n  id: 'fever_low',\n  label: 'Fever (99-101춿F)',\n  category: 'General',\n  severity: 4\n}, {\n  id: 'stomach_pain',\n  label: 'Stomach Pain',\n  category: 'Gastroenterology',\n  severity: 5\n}, {\n  id: 'vomiting',\n  label: 'Vomiting',\n  category: 'Gastroenterology',\n  severity: 5\n}, {\n  id: 'diarrhea',\n  label: 'Diarrhea',\n  category: 'Gastroenterology',\n  severity: 5\n}, {\n  id: 'back_pain',\n  label: 'Back Pain',\n  category: 'Orthopedics',\n  severity: 4\n}, {\n  id: 'joint_pain',\n  label: 'Joint Pain',\n  category: 'Orthopedics',\n  severity: 4\n}, {\n  id: 'ear_pain',\n  label: 'Ear Pain',\n  category: 'ENT',\n  severity: 5\n}, {\n  id: 'tooth_pain',\n  label: 'Toothache',\n  category: 'Dental',\n  severity: 5\n},\n// High severity (7-8)\n{\n  id: 'fever_high',\n  label: 'High Fever (>102춿F)',\n  category: 'General',\n  severity: 7\n}, {\n  id: 'breathing_difficulty',\n  label: 'Difficulty Breathing',\n  category: 'Respiratory',\n  severity: 8\n}, {\n  id: 'severe_pain',\n  label: 'Severe Pain',\n  category: 'General',\n  severity: 7\n}, {\n  id: 'bleeding',\n  label: 'Heavy Bleeding',\n  category: 'General',\n  severity: 8\n}, {\n  id: 'fracture',\n  label: 'Suspected Fracture',\n  category: 'Orthopedics',\n  severity: 7\n}, {\n  id: 'burn',\n  label: 'Burn (moderate to severe)',\n  category: 'General',\n  severity: 7\n},\n// Emergency (9-10)\n{\n  id: 'chest_pain',\n  label: 'Chest Pain',\n  category: 'Cardiology',\n  severity: 10\n}, {\n  id: 'unconscious',\n  label: 'Loss of Consciousness',\n  category: 'Emergency',\n  severity: 10\n}, {\n  id: 'seizure',\n  label: 'Seizure',\n  category: 'Neurology',\n  severity: 10\n}, {\n  id: 'stroke_symptoms',\n  label: 'Stroke Symptoms (FAST)',\n  category: 'Neurology',\n  severity: 10\n}, {\n  id: 'severe_injury',\n  label: 'Severe Injury/Trauma',\n  category: 'Emergency',\n  severity: 10\n}, {\n  id: 'poisoning',\n  label: 'Poisoning/Overdose',\n  category: 'Emergency',\n  severity: 10\n}, {\n  id: 'severe_allergic',\n  label: 'Severe Allergic Reaction',\n  category: 'Emergency',\n  severity: 9\n}];\n\n// Specialty mapping based on symptoms\nconst specialtyMap = {\n  'Respiratory': ['General Medicine', 'Pulmonology', 'ENT'],\n  'Cardiology': ['Cardiology', 'Emergency Medicine'],\n  'Gastroenterology': ['Gastroenterology', 'General Medicine'],\n  'Orthopedics': ['Orthopedics', 'General Surgery'],\n  'Neurology': ['Neurology', 'Emergency Medicine'],\n  'Dermatology': ['Dermatology', 'General Medicine'],\n  'ENT': ['ENT', 'General Medicine'],\n  'Dental': ['Dental'],\n  'Emergency': ['Emergency Medicine', 'Trauma Care'],\n  'General': ['General Medicine']\n};\n\n/**\n * Assessment Service Interface\n * This interface ensures any implementation (rule-based or AI) returns the same contract\n */\nclass AssessmentService {\n  /**\n   * Assess symptoms and return severity + specialty\n   * @param {Array<string>} symptomIds - Selected symptom IDs\n   * @param {string} additionalNotes - Free text notes from user\n   * @returns {Promise<AssessmentResult>}\n   */\n  async assess(symptomIds, additionalNotes = '') {\n    throw new Error('assess() must be implemented');\n  }\n}\n\n/**\n * AssessmentResult interface\n * @typedef {Object} AssessmentResult\n * @property {number} severity - Severity score 1-10\n * @property {string} severityLevel - 'mild' | 'moderate' | 'high' | 'emergency'\n * @property {Array<string>} specialties - Recommended specialties\n * @property {string} recommendation - Human-readable recommendation\n * @property {Object} metadata - Additional metadata (for debugging/logging)\n */\n\n/**\n * Phase 1: Rule-Based Assessment (Current Implementation)\n */\nclass RuleBasedAssessment extends AssessmentService {\n  async assess(symptomIds, additionalNotes = '') {\n    // Simulate slight delay (like an API call)\n    await new Promise(resolve => setTimeout(resolve, 300));\n\n    // CRITICAL: Check for emergency keywords first\n    const emergencyDetected = this._detectEmergencyKeywords(additionalNotes);\n    if (emergencyDetected.isEmergency) {\n      // Automatic emergency routing\n      return {\n        severity: 10,\n        severityLevel: 'emergency',\n        specialties: ['Emergency Medicine', 'Trauma Care'],\n        recommendation: '游뚿 LIFE-THREATENING EMERGENCY DETECTED: Seek immediate medical attention. Call 108 NOW.',\n        isAutoEmergency: true,\n        detectedKeywords: emergencyDetected.keywords,\n        metadata: {\n          method: 'rule-based',\n          version: '1.0',\n          emergencyAutoDetected: true,\n          trigger: 'keyword_detection'\n        }\n      };\n    }\n    if (!symptomIds || symptomIds.length === 0) {\n      return {\n        severity: 2,\n        severityLevel: 'mild',\n        specialties: ['General Medicine'],\n        recommendation: 'Please select symptoms for better assessment',\n        metadata: {\n          method: 'rule-based',\n          version: '1.0'\n        }\n      };\n    }\n\n    // Get selected symptoms\n    const selectedSymptoms = symptomOptions.filter(s => symptomIds.includes(s.id));\n\n    // Calculate severity (use highest severity among selected symptoms)\n    const maxSeverity = Math.max(...selectedSymptoms.map(s => s.severity));\n\n    // Adjust severity based on number of symptoms (multiple symptoms = higher severity)\n    let adjustedSeverity = maxSeverity;\n    if (selectedSymptoms.length >= 3) {\n      adjustedSeverity = Math.min(10, maxSeverity + 1);\n    }\n\n    // Determine severity level\n    const severityLevel = this._getSeverityLevel(adjustedSeverity);\n\n    // Get specialties from selected symptoms\n    const categories = [...new Set(selectedSymptoms.map(s => s.category))];\n    const specialties = [...new Set(categories.flatMap(cat => specialtyMap[cat] || ['General Medicine']))];\n\n    // Generate recommendation\n    const recommendation = this._generateRecommendation(adjustedSeverity, specialties);\n    return {\n      severity: adjustedSeverity,\n      severityLevel,\n      specialties,\n      recommendation,\n      metadata: {\n        method: 'rule-based',\n        version: '1.0',\n        selectedSymptoms: selectedSymptoms.map(s => s.label),\n        categories\n      }\n    };\n  }\n  _detectEmergencyKeywords(text) {\n    if (!text) return {\n      isEmergency: false,\n      keywords: []\n    };\n    const lowerText = text.toLowerCase();\n    const detectedKeywords = emergencyKeywords.filter(keyword => lowerText.includes(keyword.toLowerCase()));\n    return {\n      isEmergency: detectedKeywords.length > 0,\n      keywords: detectedKeywords\n    };\n  }\n  _getSeverityLevel(severity) {\n    if (severity >= 9) return 'emergency';\n    if (severity >= 7) return 'high';\n    if (severity >= 4) return 'moderate';\n    return 'mild';\n  }\n  _generateRecommendation(severity, specialties) {\n    if (severity >= 9) {\n      return '游뚿 EMERGENCY: Seek immediate medical attention. Call 108 if needed.';\n    }\n    if (severity >= 7) {\n      return `丘멆잺 HIGH PRIORITY: Visit a hospital with ${specialties[0]} department soon.`;\n    }\n    if (severity >= 4) {\n      return `游리 MODERATE: Schedule an appointment with ${specialties[0]} within 24-48 hours.`;\n    }\n    return `游릭 MILD: Visit a nearby clinic or health center when convenient.`;\n  }\n}\n\n/**\n * Phase 2: AI-Based Assessment (Future Implementation)\n * This class shows how GenAI/Bedrock can be integrated without changing frontend\n */\nclass AIBasedAssessment extends AssessmentService {\n  constructor(apiEndpoint) {\n    super();\n    this.apiEndpoint = apiEndpoint;\n  }\n  async assess(symptomIds, additionalNotes = '') {\n    // Future implementation: Call Amazon Bedrock/Claude API\n    // The frontend will never know the difference!\n\n    const selectedSymptoms = symptomOptions.filter(s => symptomIds.includes(s.id));\n    const response = await fetch(this.apiEndpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        symptoms: selectedSymptoms.map(s => s.label),\n        additionalNotes,\n        timestamp: new Date().toISOString()\n      })\n    });\n    const result = await response.json();\n\n    // AI response must conform to the same AssessmentResult interface\n    return {\n      severity: result.severity,\n      severityLevel: result.severityLevel,\n      specialties: result.specialties,\n      recommendation: result.recommendation,\n      metadata: {\n        method: 'ai-based',\n        model: result.model || 'bedrock-claude',\n        confidence: result.confidence\n      }\n    };\n  }\n}\n\n/**\n * Assessment Factory\n * Switch between implementations via environment variable or config\n */\nexport function createAssessmentService() {\n  // Check environment or config to determine which service to use\n  const useAI = process.env.REACT_APP_USE_AI_ASSESSMENT === 'true';\n  const aiEndpoint = process.env.REACT_APP_AI_ASSESSMENT_ENDPOINT;\n  if (useAI && aiEndpoint) {\n    console.log('Using AI-based assessment service');\n    return new AIBasedAssessment(aiEndpoint);\n  }\n  console.log('Using rule-based assessment service');\n  return new RuleBasedAssessment();\n}\n\n// Export the service instance\nexport const assessmentService = createAssessmentService();","map":{"version":3,"names":["emergencyKeywords","symptomOptions","id","label","category","severity","specialtyMap","AssessmentService","assess","symptomIds","additionalNotes","Error","RuleBasedAssessment","Promise","resolve","setTimeout","emergencyDetected","_detectEmergencyKeywords","isEmergency","severityLevel","specialties","recommendation","isAutoEmergency","detectedKeywords","keywords","metadata","method","version","emergencyAutoDetected","trigger","length","selectedSymptoms","filter","s","includes","maxSeverity","Math","max","map","adjustedSeverity","min","_getSeverityLevel","categories","Set","flatMap","cat","_generateRecommendation","text","lowerText","toLowerCase","keyword","AIBasedAssessment","constructor","apiEndpoint","response","fetch","headers","body","JSON","stringify","symptoms","timestamp","Date","toISOString","result","json","model","confidence","createAssessmentService","useAI","process","env","REACT_APP_USE_AI_ASSESSMENT","aiEndpoint","REACT_APP_AI_ASSESSMENT_ENDPOINT","console","log","assessmentService"],"sources":["/Users/sonalgan/Desktop/whats-up-doc/whats-up-doc/frontend/src/symptomAssessment.js"],"sourcesContent":["// Symptom Assessment System\n// Phase 1: Rule-based logic (current)\n// Phase 2: Can be swapped with Amazon Bedrock/GenAI with zero frontend changes\n\n// Emergency keywords that trigger automatic emergency routing\nexport const emergencyKeywords = [\n  // Cardiac emergencies\n  'chest pain', 'heart attack', 'cardiac arrest', 'heart pain',\n  \n  // Breathing emergencies\n  'breathlessness', 'can\\'t breathe', 'cannot breathe', 'difficulty breathing',\n  'shortness of breath', 'gasping', 'choking', 'suffocating',\n  \n  // Bleeding emergencies\n  'severe bleeding', 'heavy bleeding', 'bleeding heavily', 'blood loss',\n  'hemorrhage', 'bleeding profusely',\n  \n  // Neurological emergencies\n  'stroke', 'paralysis', 'face drooping', 'arm weakness', 'speech difficulty',\n  'loss of consciousness', 'unconscious', 'passed out', 'fainted', 'collapsed',\n  'seizure', 'convulsion', 'fitting',\n  \n  // Trauma emergencies\n  'severe injury', 'major accident', 'head injury', 'severe trauma',\n  'broken bone', 'fracture', 'severe burn',\n  \n  // Other critical conditions\n  'poisoning', 'overdose', 'suicide attempt', 'severe allergic reaction',\n  'anaphylaxis', 'severe pain', 'unbearable pain'\n];\n\n// Predefined symptom options with severity weights\nexport const symptomOptions = [\n  // Mild symptoms (1-3)\n  { id: 'cold', label: 'Common Cold', category: 'Respiratory', severity: 2 },\n  { id: 'cough', label: 'Mild Cough', category: 'Respiratory', severity: 2 },\n  { id: 'headache', label: 'Headache', category: 'General', severity: 2 },\n  { id: 'fatigue', label: 'Fatigue', category: 'General', severity: 2 },\n  { id: 'sore_throat', label: 'Sore Throat', category: 'Respiratory', severity: 2 },\n  { id: 'skin_rash', label: 'Skin Rash (mild)', category: 'Dermatology', severity: 3 },\n  { id: 'minor_cut', label: 'Minor Cut/Wound', category: 'General', severity: 2 },\n  \n  // Moderate symptoms (4-6)\n  { id: 'fever_low', label: 'Fever (99-101춿F)', category: 'General', severity: 4 },\n  { id: 'stomach_pain', label: 'Stomach Pain', category: 'Gastroenterology', severity: 5 },\n  { id: 'vomiting', label: 'Vomiting', category: 'Gastroenterology', severity: 5 },\n  { id: 'diarrhea', label: 'Diarrhea', category: 'Gastroenterology', severity: 5 },\n  { id: 'back_pain', label: 'Back Pain', category: 'Orthopedics', severity: 4 },\n  { id: 'joint_pain', label: 'Joint Pain', category: 'Orthopedics', severity: 4 },\n  { id: 'ear_pain', label: 'Ear Pain', category: 'ENT', severity: 5 },\n  { id: 'tooth_pain', label: 'Toothache', category: 'Dental', severity: 5 },\n  \n  // High severity (7-8)\n  { id: 'fever_high', label: 'High Fever (>102춿F)', category: 'General', severity: 7 },\n  { id: 'breathing_difficulty', label: 'Difficulty Breathing', category: 'Respiratory', severity: 8 },\n  { id: 'severe_pain', label: 'Severe Pain', category: 'General', severity: 7 },\n  { id: 'bleeding', label: 'Heavy Bleeding', category: 'General', severity: 8 },\n  { id: 'fracture', label: 'Suspected Fracture', category: 'Orthopedics', severity: 7 },\n  { id: 'burn', label: 'Burn (moderate to severe)', category: 'General', severity: 7 },\n  \n  // Emergency (9-10)\n  { id: 'chest_pain', label: 'Chest Pain', category: 'Cardiology', severity: 10 },\n  { id: 'unconscious', label: 'Loss of Consciousness', category: 'Emergency', severity: 10 },\n  { id: 'seizure', label: 'Seizure', category: 'Neurology', severity: 10 },\n  { id: 'stroke_symptoms', label: 'Stroke Symptoms (FAST)', category: 'Neurology', severity: 10 },\n  { id: 'severe_injury', label: 'Severe Injury/Trauma', category: 'Emergency', severity: 10 },\n  { id: 'poisoning', label: 'Poisoning/Overdose', category: 'Emergency', severity: 10 },\n  { id: 'severe_allergic', label: 'Severe Allergic Reaction', category: 'Emergency', severity: 9 }\n];\n\n// Specialty mapping based on symptoms\nconst specialtyMap = {\n  'Respiratory': ['General Medicine', 'Pulmonology', 'ENT'],\n  'Cardiology': ['Cardiology', 'Emergency Medicine'],\n  'Gastroenterology': ['Gastroenterology', 'General Medicine'],\n  'Orthopedics': ['Orthopedics', 'General Surgery'],\n  'Neurology': ['Neurology', 'Emergency Medicine'],\n  'Dermatology': ['Dermatology', 'General Medicine'],\n  'ENT': ['ENT', 'General Medicine'],\n  'Dental': ['Dental'],\n  'Emergency': ['Emergency Medicine', 'Trauma Care'],\n  'General': ['General Medicine']\n};\n\n/**\n * Assessment Service Interface\n * This interface ensures any implementation (rule-based or AI) returns the same contract\n */\nclass AssessmentService {\n  /**\n   * Assess symptoms and return severity + specialty\n   * @param {Array<string>} symptomIds - Selected symptom IDs\n   * @param {string} additionalNotes - Free text notes from user\n   * @returns {Promise<AssessmentResult>}\n   */\n  async assess(symptomIds, additionalNotes = '') {\n    throw new Error('assess() must be implemented');\n  }\n}\n\n/**\n * AssessmentResult interface\n * @typedef {Object} AssessmentResult\n * @property {number} severity - Severity score 1-10\n * @property {string} severityLevel - 'mild' | 'moderate' | 'high' | 'emergency'\n * @property {Array<string>} specialties - Recommended specialties\n * @property {string} recommendation - Human-readable recommendation\n * @property {Object} metadata - Additional metadata (for debugging/logging)\n */\n\n/**\n * Phase 1: Rule-Based Assessment (Current Implementation)\n */\nclass RuleBasedAssessment extends AssessmentService {\n  async assess(symptomIds, additionalNotes = '') {\n    // Simulate slight delay (like an API call)\n    await new Promise(resolve => setTimeout(resolve, 300));\n    \n    // CRITICAL: Check for emergency keywords first\n    const emergencyDetected = this._detectEmergencyKeywords(additionalNotes);\n    \n    if (emergencyDetected.isEmergency) {\n      // Automatic emergency routing\n      return {\n        severity: 10,\n        severityLevel: 'emergency',\n        specialties: ['Emergency Medicine', 'Trauma Care'],\n        recommendation: '游뚿 LIFE-THREATENING EMERGENCY DETECTED: Seek immediate medical attention. Call 108 NOW.',\n        isAutoEmergency: true,\n        detectedKeywords: emergencyDetected.keywords,\n        metadata: { \n          method: 'rule-based', \n          version: '1.0',\n          emergencyAutoDetected: true,\n          trigger: 'keyword_detection'\n        }\n      };\n    }\n    \n    if (!symptomIds || symptomIds.length === 0) {\n      return {\n        severity: 2,\n        severityLevel: 'mild',\n        specialties: ['General Medicine'],\n        recommendation: 'Please select symptoms for better assessment',\n        metadata: { method: 'rule-based', version: '1.0' }\n      };\n    }\n\n    // Get selected symptoms\n    const selectedSymptoms = symptomOptions.filter(s => symptomIds.includes(s.id));\n    \n    // Calculate severity (use highest severity among selected symptoms)\n    const maxSeverity = Math.max(...selectedSymptoms.map(s => s.severity));\n    \n    // Adjust severity based on number of symptoms (multiple symptoms = higher severity)\n    let adjustedSeverity = maxSeverity;\n    if (selectedSymptoms.length >= 3) {\n      adjustedSeverity = Math.min(10, maxSeverity + 1);\n    }\n    \n    // Determine severity level\n    const severityLevel = this._getSeverityLevel(adjustedSeverity);\n    \n    // Get specialties from selected symptoms\n    const categories = [...new Set(selectedSymptoms.map(s => s.category))];\n    const specialties = [...new Set(\n      categories.flatMap(cat => specialtyMap[cat] || ['General Medicine'])\n    )];\n    \n    // Generate recommendation\n    const recommendation = this._generateRecommendation(adjustedSeverity, specialties);\n    \n    return {\n      severity: adjustedSeverity,\n      severityLevel,\n      specialties,\n      recommendation,\n      metadata: {\n        method: 'rule-based',\n        version: '1.0',\n        selectedSymptoms: selectedSymptoms.map(s => s.label),\n        categories\n      }\n    };\n  }\n  \n  _detectEmergencyKeywords(text) {\n    if (!text) return { isEmergency: false, keywords: [] };\n    \n    const lowerText = text.toLowerCase();\n    const detectedKeywords = emergencyKeywords.filter(keyword => \n      lowerText.includes(keyword.toLowerCase())\n    );\n    \n    return {\n      isEmergency: detectedKeywords.length > 0,\n      keywords: detectedKeywords\n    };\n  }\n  \n  _getSeverityLevel(severity) {\n    if (severity >= 9) return 'emergency';\n    if (severity >= 7) return 'high';\n    if (severity >= 4) return 'moderate';\n    return 'mild';\n  }\n  \n  _generateRecommendation(severity, specialties) {\n    if (severity >= 9) {\n      return '游뚿 EMERGENCY: Seek immediate medical attention. Call 108 if needed.';\n    }\n    if (severity >= 7) {\n      return `丘멆잺 HIGH PRIORITY: Visit a hospital with ${specialties[0]} department soon.`;\n    }\n    if (severity >= 4) {\n      return `游리 MODERATE: Schedule an appointment with ${specialties[0]} within 24-48 hours.`;\n    }\n    return `游릭 MILD: Visit a nearby clinic or health center when convenient.`;\n  }\n}\n\n/**\n * Phase 2: AI-Based Assessment (Future Implementation)\n * This class shows how GenAI/Bedrock can be integrated without changing frontend\n */\nclass AIBasedAssessment extends AssessmentService {\n  constructor(apiEndpoint) {\n    super();\n    this.apiEndpoint = apiEndpoint;\n  }\n  \n  async assess(symptomIds, additionalNotes = '') {\n    // Future implementation: Call Amazon Bedrock/Claude API\n    // The frontend will never know the difference!\n    \n    const selectedSymptoms = symptomOptions.filter(s => symptomIds.includes(s.id));\n    \n    const response = await fetch(this.apiEndpoint, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        symptoms: selectedSymptoms.map(s => s.label),\n        additionalNotes,\n        timestamp: new Date().toISOString()\n      })\n    });\n    \n    const result = await response.json();\n    \n    // AI response must conform to the same AssessmentResult interface\n    return {\n      severity: result.severity,\n      severityLevel: result.severityLevel,\n      specialties: result.specialties,\n      recommendation: result.recommendation,\n      metadata: {\n        method: 'ai-based',\n        model: result.model || 'bedrock-claude',\n        confidence: result.confidence\n      }\n    };\n  }\n}\n\n/**\n * Assessment Factory\n * Switch between implementations via environment variable or config\n */\nexport function createAssessmentService() {\n  // Check environment or config to determine which service to use\n  const useAI = process.env.REACT_APP_USE_AI_ASSESSMENT === 'true';\n  const aiEndpoint = process.env.REACT_APP_AI_ASSESSMENT_ENDPOINT;\n  \n  if (useAI && aiEndpoint) {\n    console.log('Using AI-based assessment service');\n    return new AIBasedAssessment(aiEndpoint);\n  }\n  \n  console.log('Using rule-based assessment service');\n  return new RuleBasedAssessment();\n}\n\n// Export the service instance\nexport const assessmentService = createAssessmentService();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}